//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table users {
  id String [pk]
  email String [unique, not null]
  name String [not null]
  passwordHash String [not null]
  avatar String
  phone String
  locale String [not null, default: 'en']
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  business businesses
  alerts alerts [not null]
}

Table businesses {
  id String [pk]
  userId String [unique, not null]
  user users [not null]
  name String [not null]
  registrationNo String
  taxId String
  address String
  city String
  country String
  postalCode String
  phone String
  email String
  website String
  logo String
  currency String [not null, default: 'USD']
  timezone String [not null, default: 'UTC']
  language String [not null, default: 'en']
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table products {
  id String [pk]
  sku String [unique, not null]
  name String [not null]
  description String
  category String
  image String
  costPrice Decimal [not null]
  sellingPrice Decimal [not null]
  unit String [not null, default: 'piece']
  minStockLevel Int [not null, default: 0]
  maxStockLevel Int
  productionTime Int
  shelfLife Int
  isActive Boolean [not null, default: true]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  recipe recipes
  inventory inventory [not null]
  productionBatches production_batches [not null]
  orderItems order_items [not null]
}

Table recipes {
  id String [pk]
  productId String [unique, not null]
  product products [not null]
  batchSize Decimal [not null]
  batchUnit String [not null, default: 'piece']
  instructions String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  ingredients recipe_ingredients [not null]
}

Table ingredients {
  id String [pk]
  sku String [unique, not null]
  name String [not null]
  description String
  category String
  unit String [not null, default: 'kg']
  unitCost Decimal [not null]
  minStockLevel Decimal [not null, default: 0]
  maxStockLevel Decimal
  supplierId String
  supplier suppliers
  supplierSku String
  isActive Boolean [not null, default: true]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  recipeIngredients recipe_ingredients [not null]
  inventory inventory [not null]
  purchaseOrderItems purchase_order_items [not null]
}

Table recipe_ingredients {
  id String [pk]
  recipeId String [not null]
  recipe recipes [not null]
  ingredientId String [not null]
  ingredient ingredients [not null]
  quantity Decimal [not null]
  unit String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]

  indexes {
    (recipeId, ingredientId) [unique]
  }
}

Table inventory {
  id String [pk]
  productId String
  product products
  ingredientId String
  ingredient ingredients
  quantity Decimal [not null]
  unit String [not null]
  location String
  batchNumber String
  expiryDate DateTime
  lastStockTake DateTime
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transactions inventory_transactions [not null]
}

Table inventory_transactions {
  id String [pk]
  inventoryId String [not null]
  inventory inventory [not null]
  type TransactionType [not null]
  quantity Decimal [not null]
  unit String [not null]
  productionBatchId String
  productionBatch production_batches
  orderId String
  order orders
  purchaseOrderId String
  purchaseOrder purchase_orders
  notes String
  createdAt DateTime [default: `now()`, not null]
}

Table production_batches {
  id String [pk]
  batchNumber String [unique, not null]
  productId String [not null]
  product products [not null]
  plannedQuantity Decimal [not null]
  actualQuantity Decimal
  unit String [not null]
  status ProductionStatus [not null, default: 'PLANNED']
  scheduledStart DateTime [not null]
  scheduledEnd DateTime
  actualStart DateTime
  actualEnd DateTime
  quality String
  productionCost Decimal
  notes String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transactions inventory_transactions [not null]
}

Table suppliers {
  id String [pk]
  code String [unique, not null]
  name String [not null]
  contactPerson String
  email String
  phone String
  address String
  city String
  country String
  postalCode String
  paymentTerms String
  taxId String
  isActive Boolean [not null, default: true]
  rating Int [default: 0]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  ingredients ingredients [not null]
  purchaseOrders purchase_orders [not null]
}

Table purchase_orders {
  id String [pk]
  orderNumber String [unique, not null]
  supplierId String [not null]
  supplier suppliers [not null]
  status PurchaseOrderStatus [not null, default: 'DRAFT']
  orderDate DateTime [default: `now()`, not null]
  expectedDate DateTime
  receivedDate DateTime
  subtotal Decimal [not null]
  tax Decimal [not null, default: 0]
  shipping Decimal [not null, default: 0]
  total Decimal [not null]
  notes String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  items purchase_order_items [not null]
  transactions inventory_transactions [not null]
}

Table purchase_order_items {
  id String [pk]
  purchaseOrderId String [not null]
  purchaseOrder purchase_orders [not null]
  ingredientId String [not null]
  ingredient ingredients [not null]
  quantity Decimal [not null]
  unit String [not null]
  unitPrice Decimal [not null]
  total Decimal [not null]
  receivedQuantity Decimal
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table orders {
  id String [pk]
  orderNumber String [unique, not null]
  customerName String [not null]
  customerEmail String
  customerPhone String
  deliveryAddress String
  status OrderStatus [not null, default: 'PENDING']
  orderDate DateTime [default: `now()`, not null]
  dueDate DateTime
  deliveredDate DateTime
  subtotal Decimal [not null]
  tax Decimal [not null, default: 0]
  delivery Decimal [not null, default: 0]
  total Decimal [not null]
  notes String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  items order_items [not null]
  transactions inventory_transactions [not null]
}

Table order_items {
  id String [pk]
  orderId String [not null]
  order orders [not null]
  productId String [not null]
  product products [not null]
  quantity Decimal [not null]
  unit String [not null]
  unitPrice Decimal [not null]
  total Decimal [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table alerts {
  id String [pk]
  userId String [not null]
  user users [not null]
  type AlertType [not null]
  severity AlertSeverity [not null, default: 'INFO']
  title String [not null]
  message String [not null]
  entityType String
  entityId String
  isRead Boolean [not null, default: false]
  isDismissed Boolean [not null, default: false]
  createdAt DateTime [default: `now()`, not null]
}

Table settings {
  id String [pk]
  key String [unique, not null]
  value String [not null]
  description String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Enum TransactionType {
  PURCHASE
  PRODUCTION_IN
  PRODUCTION_OUT
  SALE
  ADJUSTMENT
  WASTE
  RETURN
}

Enum ProductionStatus {
  PLANNED
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

Enum PurchaseOrderStatus {
  DRAFT
  SENT
  CONFIRMED
  RECEIVED
  CANCELLED
}

Enum OrderStatus {
  PENDING
  CONFIRMED
  IN_PRODUCTION
  READY
  DELIVERED
  CANCELLED
}

Enum AlertType {
  LOW_STOCK
  EXPIRING_SOON
  EXPIRED
  PRODUCTION_DELAYED
  ORDER_DUE
  SYSTEM
}

Enum AlertSeverity {
  INFO
  WARNING
  CRITICAL
}

Ref: businesses.userId - users.id [delete: Cascade]

Ref: recipes.productId - products.id [delete: Cascade]

Ref: ingredients.supplierId > suppliers.id [delete: Set Null]

Ref: recipe_ingredients.recipeId > recipes.id [delete: Cascade]

Ref: recipe_ingredients.ingredientId > ingredients.id [delete: Cascade]

Ref: inventory.productId > products.id [delete: Cascade]

Ref: inventory.ingredientId > ingredients.id [delete: Cascade]

Ref: inventory_transactions.inventoryId > inventory.id [delete: Cascade]

Ref: inventory_transactions.productionBatchId > production_batches.id [delete: Set Null]

Ref: inventory_transactions.orderId > orders.id [delete: Set Null]

Ref: inventory_transactions.purchaseOrderId > purchase_orders.id [delete: Set Null]

Ref: production_batches.productId > products.id [delete: Cascade]

Ref: purchase_orders.supplierId > suppliers.id [delete: Cascade]

Ref: purchase_order_items.purchaseOrderId > purchase_orders.id [delete: Cascade]

Ref: purchase_order_items.ingredientId > ingredients.id [delete: Cascade]

Ref: order_items.orderId > orders.id [delete: Cascade]

Ref: order_items.productId > products.id [delete: Cascade]

Ref: alerts.userId > users.id [delete: Cascade]